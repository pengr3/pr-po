---
phase: 17-procurement-workflow-overhaul
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - app/views/procurement.js
autonomous: true

must_haves:
  truths:
    - "PR-PO tab is renamed to 'MRF Records'"
    - "DATE column is renamed to 'Date Needed'"
    - "PO Status column is renamed to 'Procurement Status'"
    - "PO Timeline column is removed from table"
    - "Columns are ordered: MRF ID, Project, Date Needed, PRs, POs, MRF Status, Procurement Status, Actions"
  artifacts:
    - path: "app/views/procurement.js"
      provides: "Renamed tab and restructured table columns"
      min_lines: 4360
      contains: "MRF Records"
  key_links:
    - from: "Tab navigation"
      to: "#/procurement/records route"
      via: "Hash-based routing"
      pattern: "href=\"#/procurement/records\""
---

<objective>
Rename the PR-PO Records tab to "MRF Records" and restructure table columns for clarity.

Purpose: Improve clarity by centering the view on MRFs (the source of truth) rather than PR-PO relationships. Rename and reorder columns to present information in logical workflow order.

Output: Updated tab label and table headers with reordered columns following the MRF → PRs → POs → Status → Actions flow.
</objective>

<execution_context>
@C:\Users\franc\dev\projects\pr-po\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\franc\dev\projects\pr-po\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@C:\Users\franc\dev\projects\pr-po\.planning\PROJECT.md
@C:\Users\franc\dev\projects\pr-po\.planning\ROADMAP.md
@C:\Users\franc\dev\projects\pr-po\.planning\STATE.md
@C:\Users\franc\dev\projects\pr-po\.planning\phases\17-procurement-workflow-overhaul\17-RESEARCH.md
@C:\Users\franc\dev\projects\pr-po\CLAUDE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename tab label from "PR-PO Records" to "MRF Records"</name>
  <files>app/views/procurement.js</files>
  <action>
Update tab display label in the `render()` function:

1. Locate the tab navigation section (around line 120):
```javascript
<a href="#/procurement/records" class="tab-btn ${activeTab === 'records' ? 'active' : ''}">
    PR-PO Records  // CHANGE THIS
</a>
```

2. Change to:
```javascript
<a href="#/procurement/records" class="tab-btn ${activeTab === 'records' ? 'active' : ''}">
    MRF Records
</a>
```

3. **CRITICAL - Do NOT change:**
   - The href path: `#/procurement/records` (routing depends on this)
   - The activeTab comparison: `activeTab === 'records'` (tab activation logic)
   - The class names

4. Update the section header (around line 230):
```javascript
<h2>PR-PO Records</h2>  // CHANGE to "MRF Records"
```

5. Update all user-facing text references to "PR-PO Records":
   - Empty state message (line 2297)
   - Loading messages
   - Console log messages (optional, but use "MRF Records" for consistency)

**Why only display text:** Per Research Pitfall #1 (Tab Renaming Breaking Routes), only change display labels, NOT routing paths or logic. Router.js expects the 'records' path.
  </action>
  <verify>
```bash
# Verify tab label changed
grep "MRF Records" app/views/procurement.js | head -5

# Verify route path NOT changed
grep "#/procurement/records" app/views/procurement.js

# Verify activeTab logic NOT changed
grep "activeTab === 'records'" app/views/procurement.js
```
  </verify>
  <done>
- Tab label displays "MRF Records" instead of "PR-PO Records"
- Section header displays "MRF Records"
- Route path remains "#/procurement/records" (not changed)
- activeTab comparison remains "activeTab === 'records'" (not changed)
- All user-facing text updated for consistency
  </done>
</task>

<task type="auto">
  <name>Task 2: Restructure table columns and rename headers</name>
  <files>app/views/procurement.js</files>
  <action>
Update the table structure in `renderPRPORecords()` function (starts around line 2287):

1. Locate the table header rendering (around line 2340-2380).

2. Replace the `<thead>` section with this column order:
```javascript
<thead>
    <tr style="background: #f8f9fa;">
        <th style="padding: 0.75rem 1rem; text-align: center; border-bottom: 2px solid #e5e7eb; font-size: 0.75rem; font-weight: 600;">MRF ID</th>
        <th style="padding: 0.75rem 1rem; text-align: left; border-bottom: 2px solid #e5e7eb; font-size: 0.75rem; font-weight: 600;">Project</th>
        <th style="padding: 0.75rem 1rem; text-align: center; border-bottom: 2px solid #e5e7eb; font-size: 0.75rem; font-weight: 600;">Date Needed</th>
        <th style="padding: 0.75rem 1rem; text-align: left; border-bottom: 2px solid #e5e7eb; font-size: 0.75rem; font-weight: 600;">PRs</th>
        <th style="padding: 0.75rem 1rem; text-align: left; border-bottom: 2px solid #e5e7eb; font-size: 0.75rem; font-weight: 600;">POs</th>
        <th style="padding: 0.75rem 1rem; text-align: left; border-bottom: 2px solid #e5e7eb; font-size: 0.75rem; font-weight: 600;">MRF Status</th>
        <th style="padding: 0.75rem 1rem; text-align: left; border-bottom: 2px solid #e5e7eb; font-size: 0.75rem; font-weight: 600;">Procurement Status</th>
        <th style="padding: 0.75rem 1rem; text-align: center; border-bottom: 2px solid #e5e7eb; font-size: 0.75rem; font-weight: 600;">Actions</th>
    </tr>
</thead>
```

3. Update the corresponding `<tbody>` rows to match this column order. Current order is likely:
   - MRF ID, Project, Date, PRs, POs, PO Timeline, PO Status, Actions

4. **Changes:**
   - "Date" → "Date Needed"
   - "PO Status" → "Procurement Status"
   - REMOVE "PO Timeline" column entirely (Timeline button stays in Actions column)
   - ADD "MRF Status" column (placeholder for now - Plan 03 will populate)

5. For the "MRF Status" column cells (in tbody), add placeholder:
```javascript
<td style="padding: 0.75rem 1rem;">
    <span style="color: #64748b; font-size: 0.75rem;">—</span>
</td>
```

6. Ensure the table cell order in rows matches the header order exactly.

**Why remove PO Timeline column:** Timeline button remains in Actions column, so dedicated column is redundant. Reduces visual clutter.

**Why MRF Status column:** Plan 03 will populate this with color-coded badges (Awaiting PR, 0/n PO Issued, n/n PO Issued).
  </action>
  <verify>
```bash
# Verify column headers renamed
grep "Date Needed" app/views/procurement.js
grep "Procurement Status" app/views/procurement.js
grep "MRF Status" app/views/procurement.js

# Verify PO Timeline column removed from header
grep -c "PO Timeline" app/views/procurement.js  # Should return 0 or only in comments

# Verify 8 columns in header (MRF ID, Project, Date Needed, PRs, POs, MRF Status, Procurement Status, Actions)
grep -A 10 "<thead>" app/views/procurement.js | grep "<th" | wc -l  # Should be 8
```
  </verify>
  <done>
- Table header has 8 columns in specified order
- "Date" column renamed to "Date Needed"
- "PO Status" column renamed to "Procurement Status"
- "PO Timeline" column removed
- "MRF Status" column added with placeholder
- Table body rows match header column order
- Timeline button remains in Actions column
  </done>
</task>

</tasks>

<verification>
After completing all tasks:

1. **Visual Check:**
   - Navigate to Procurement view
   - Tab should display "MRF Records" (not "PR-PO Records")
   - Click tab - should navigate correctly to #/procurement/records

2. **Table Structure:**
   - Records table should have 8 columns
   - Column headers from left to right: MRF ID, Project, Date Needed, PRs, POs, MRF Status, Procurement Status, Actions
   - "MRF Status" column should show placeholder (—)
   - No "PO Timeline" column visible

3. **Functionality:**
   - All existing functionality still works (viewing PRs, POs, timeline button)
   - Timeline button in Actions column still functional
   - Sorting, filtering, pagination still work

4. **No Breaking Changes:**
   - Route path still #/procurement/records
   - activeTab logic still checks for 'records'
   - Clicking tab from other tabs works correctly
</verification>

<success_criteria>
- [x] PR-PO tab renamed to "MRF Records"
- [x] "DATE" column renamed to "Date Needed"
- [x] "PO Status" column renamed to "Procurement Status"
- [x] "PO Timeline" column removed (timeline button remains in Actions)
- [x] Columns ordered: MRF ID, Project, Date Needed, PRs, POs, MRF Status, Procurement Status, Actions
- [x] Tab navigation still functional (route path unchanged)
- [x] All existing features still work after renaming
</success_criteria>

<output>
After completion, create `.planning/phases/17-procurement-workflow-overhaul/17-02-SUMMARY.md`
</output>
