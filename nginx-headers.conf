# Nginx Configuration Snippet for Security and Performance Headers
# Add this to your nginx server block or include it in your nginx.conf
# Usage: include /path/to/nginx-headers.conf;

# Security Headers
add_header X-Content-Type-Options "nosniff" always;
add_header Content-Security-Policy "frame-ancestors 'self'" always;

# HTML files - must revalidate
location ~* \.html?$ {
    add_header Cache-Control "no-cache, must-revalidate, max-age=0" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header Content-Security-Policy "frame-ancestors 'self'" always;
}

# CSS and JavaScript - cache for 1 year with immutable
location ~* \.(css|js)$ {
    add_header Cache-Control "public, max-age=31536000, immutable" always;
    add_header X-Content-Type-Options "nosniff" always;
}

# Images - cache for 1 year with immutable
location ~* \.(jpg|jpeg|png|gif|svg|ico|webp)$ {
    add_header Cache-Control "public, max-age=31536000, immutable" always;
    add_header X-Content-Type-Options "nosniff" always;
}

# Fonts - cache for 1 year with immutable
location ~* \.(woff|woff2|ttf|eot|otf)$ {
    add_header Cache-Control "public, max-age=31536000, immutable" always;
    add_header X-Content-Type-Options "nosniff" always;
}

# Media files - cache for 1 year
location ~* \.(mp4|webm|mp3|ogg|wav)$ {
    add_header Cache-Control "public, max-age=31536000, immutable" always;
    add_header X-Content-Type-Options "nosniff" always;
}

# JSON and XML - cache for 1 hour
location ~* \.(json|xml)$ {
    add_header Cache-Control "public, max-age=3600, must-revalidate" always;
    add_header X-Content-Type-Options "nosniff" always;
}

# Disable access to hidden files
location ~ /\. {
    deny all;
}
